{"version":3,"file":"ControlBar.js","sources":["node_modules/fl-assert/dist/assert.js","src/js/EventHub.js","src/js/default-fields/FieldCreatorPropType.js","src/js/ControlBar.js"],"sourcesContent":["// Bug checking function that will throw an error whenever\n// the condition sent to it is evaluated to false\n/**\n * Processes the message and outputs the correct message if the condition\n * is false. Otherwise it outputs null.\n * @api private\n * @method processCondition\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return {String | null}  - Error message if there is an error, nul otherwise.\n */\nfunction processCondition(condition, errorMessage) {\n  if (!condition) {\n    var completeErrorMessage = '';\n    var re = /at ([^\\s]+)\\s\\(/g;\n    var stackTrace = new Error().stack;\n    var stackFunctions = [];\n\n    var funcName = re.exec(stackTrace);\n    while (funcName && funcName[1]) {\n      stackFunctions.push(funcName[1]);\n      funcName = re.exec(stackTrace);\n    }\n\n    // Number 0 is processCondition itself,\n    // Number 1 is assert,\n    // Number 2 is the caller function.\n    if (stackFunctions[2]) {\n      completeErrorMessage = stackFunctions[2] + ': ' + completeErrorMessage;\n    }\n\n    completeErrorMessage += errorMessage;\n    return completeErrorMessage;\n  }\n\n  return null;\n}\n\n/**\n * Throws an error if the boolean passed to it evaluates to false.\n * To be used like this:\n * \t\tassert(myDate !== undefined, \"Date cannot be undefined.\");\n * @api public\n * @method assert\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return void\n */\nfunction assert(condition, errorMessage) {\n  var error = processCondition(condition, errorMessage);\n  if (typeof error === 'string') {\n    throw new Error(error);\n  }\n}\n\n/**\n * Logs a warning if the boolean passed to it evaluates to false.\n * To be used like this:\n * \t\tassert.warn(myDate !== undefined, \"No date provided.\");\n * @api public\n * @method warn\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return void\n */\nassert.warn = function warn(condition, errorMessage) {\n  var error = processCondition(condition, errorMessage);\n  if (typeof error === 'string') {\n    console.warn(error);\n  }\n};\n\nexport default assert;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJhc3NlcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQnVnIGNoZWNraW5nIGZ1bmN0aW9uIHRoYXQgd2lsbCB0aHJvdyBhbiBlcnJvciB3aGVuZXZlclxuLy8gdGhlIGNvbmRpdGlvbiBzZW50IHRvIGl0IGlzIGV2YWx1YXRlZCB0byBmYWxzZVxuLyoqXG4gKiBQcm9jZXNzZXMgdGhlIG1lc3NhZ2UgYW5kIG91dHB1dHMgdGhlIGNvcnJlY3QgbWVzc2FnZSBpZiB0aGUgY29uZGl0aW9uXG4gKiBpcyBmYWxzZS4gT3RoZXJ3aXNlIGl0IG91dHB1dHMgbnVsbC5cbiAqIEBhcGkgcHJpdmF0ZVxuICogQG1ldGhvZCBwcm9jZXNzQ29uZGl0aW9uXG4gKiBAcGFyYW0gIHtCb29sZWFufSBjb25kaXRpb24gLSBSZXN1bHQgb2YgdGhlIGV2YWx1YXRlZCBjb25kaXRpb25cbiAqIEBwYXJhbSAge1N0cmluZ30gZXJyb3JNZXNzYWdlIC0gTWVzc2FnZSBleHBsYWluaWcgdGhlIGVycm9yIGluIGNhc2UgaXQgaXMgdGhyb3duXG4gKiBAcmV0dXJuIHtTdHJpbmcgfCBudWxsfSAgLSBFcnJvciBtZXNzYWdlIGlmIHRoZXJlIGlzIGFuIGVycm9yLCBudWwgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBwcm9jZXNzQ29uZGl0aW9uKGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKSB7XG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgbGV0IGNvbXBsZXRlRXJyb3JNZXNzYWdlID0gJyc7XG4gICAgY29uc3QgcmUgPSAvYXQgKFteXFxzXSspXFxzXFwoL2c7XG4gICAgY29uc3Qgc3RhY2tUcmFjZSA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICAgIGNvbnN0IHN0YWNrRnVuY3Rpb25zID0gW107XG5cbiAgICBsZXQgZnVuY05hbWUgPSByZS5leGVjKHN0YWNrVHJhY2UpO1xuICAgIHdoaWxlIChmdW5jTmFtZSAmJiBmdW5jTmFtZVsxXSkge1xuICAgICAgc3RhY2tGdW5jdGlvbnMucHVzaChmdW5jTmFtZVsxXSk7XG4gICAgICBmdW5jTmFtZSA9IHJlLmV4ZWMoc3RhY2tUcmFjZSk7XG4gICAgfVxuXG4gICAgLy8gTnVtYmVyIDAgaXMgcHJvY2Vzc0NvbmRpdGlvbiBpdHNlbGYsXG4gICAgLy8gTnVtYmVyIDEgaXMgYXNzZXJ0LFxuICAgIC8vIE51bWJlciAyIGlzIHRoZSBjYWxsZXIgZnVuY3Rpb24uXG4gICAgaWYgKHN0YWNrRnVuY3Rpb25zWzJdKSB7XG4gICAgICBjb21wbGV0ZUVycm9yTWVzc2FnZSA9IGAke3N0YWNrRnVuY3Rpb25zWzJdfTogJHtjb21wbGV0ZUVycm9yTWVzc2FnZX1gO1xuICAgIH1cblxuICAgIGNvbXBsZXRlRXJyb3JNZXNzYWdlICs9IGVycm9yTWVzc2FnZTtcbiAgICByZXR1cm4gY29tcGxldGVFcnJvck1lc3NhZ2U7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGJvb2xlYW4gcGFzc2VkIHRvIGl0IGV2YWx1YXRlcyB0byBmYWxzZS5cbiAqIFRvIGJlIHVzZWQgbGlrZSB0aGlzOlxuICogXHRcdGFzc2VydChteURhdGUgIT09IHVuZGVmaW5lZCwgXCJEYXRlIGNhbm5vdCBiZSB1bmRlZmluZWQuXCIpO1xuICogQGFwaSBwdWJsaWNcbiAqIEBtZXRob2QgYXNzZXJ0XG4gKiBAcGFyYW0gIHtCb29sZWFufSBjb25kaXRpb24gLSBSZXN1bHQgb2YgdGhlIGV2YWx1YXRlZCBjb25kaXRpb25cbiAqIEBwYXJhbSAge1N0cmluZ30gZXJyb3JNZXNzYWdlIC0gTWVzc2FnZSBleHBsYWluaWcgdGhlIGVycm9yIGluIGNhc2UgaXQgaXMgdGhyb3duXG4gKiBAcmV0dXJuIHZvaWRcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKSB7XG4gIGNvbnN0IGVycm9yID0gcHJvY2Vzc0NvbmRpdGlvbihjb25kaXRpb24sIGVycm9yTWVzc2FnZSk7XG4gIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBib29sZWFuIHBhc3NlZCB0byBpdCBldmFsdWF0ZXMgdG8gZmFsc2UuXG4gKiBUbyBiZSB1c2VkIGxpa2UgdGhpczpcbiAqIFx0XHRhc3NlcnQud2FybihteURhdGUgIT09IHVuZGVmaW5lZCwgXCJObyBkYXRlIHByb3ZpZGVkLlwiKTtcbiAqIEBhcGkgcHVibGljXG4gKiBAbWV0aG9kIHdhcm5cbiAqIEBwYXJhbSAge0Jvb2xlYW59IGNvbmRpdGlvbiAtIFJlc3VsdCBvZiB0aGUgZXZhbHVhdGVkIGNvbmRpdGlvblxuICogQHBhcmFtICB7U3RyaW5nfSBlcnJvck1lc3NhZ2UgLSBNZXNzYWdlIGV4cGxhaW5pZyB0aGUgZXJyb3IgaW4gY2FzZSBpdCBpcyB0aHJvd25cbiAqIEByZXR1cm4gdm9pZFxuICovXG5hc3NlcnQud2FybiA9IGZ1bmN0aW9uIHdhcm4oY29uZGl0aW9uLCBlcnJvck1lc3NhZ2UpIHtcbiAgY29uc3QgZXJyb3IgPSBwcm9jZXNzQ29uZGl0aW9uKGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKTtcbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3NlcnQ7XG4iXSwiZmlsZSI6ImFzc2VydC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9\n","import assert from 'fl-assert';\n\n//\n//\n//     Singleton\n//\n//\n\nconst listeners = {};\n\nfunction on(eventName, func) {\n  listeners[eventName] = listeners[eventName]\n    ? listeners[eventName].concat([func])\n    : [func];\n}\n\nfunction trigger(eventName, data) {\n  assert.warn(listeners[eventName], `No one listening to \"${eventName}.\"`);\n\n  if (!listeners[eventName]) {\n    return;\n  }\n\n  listeners[eventName].forEach(f => f(data));\n}\n\nconst EventHub = {\n  on,\n  trigger,\n};\n\n\nexport default EventHub;\n","import React from 'react';\n\n// This works as the interface for the FieldCreator Type\nconst FieldCreatorPropType = {\n  info: React.PropTypes.shape({\n    type: React.PropTypes.string,\n    group: React.PropTypes.string,\n    displayName: React.PropTypes.string,\n  }),\n  initialState: React.PropTypes.func,\n  RenderEditor: React.PropTypes.func, // React render function\n};\n\n/**\n * The initial State function returns:\n * {\n   type: React.PropTypes.string,\n   group: React.PropTypes.string,\n   displayName: React.PropTypes.string,\n\n   required: React.PropTypes.bool,\n   configShowing: React.PropTypes.bool,\n }\n */\nexport default FieldCreatorPropType;\n","import React from 'react';\nimport EventHub from './EventHub';\nimport FieldCreatorPropType from './default-fields/FieldCreatorPropType';\n\n\nconst ButtonDropdownOption = ({ description }) => (\n  <li>\n    <a\n      href=\"#\"\n      onClick={() => EventHub.trigger('createField', description.type)}\n    >\n      {description.displayName}\n    </a>\n  </li>\n);\n\nButtonDropdownOption.propTypes = {\n  description: React.PropTypes.shape({\n    type: React.PropTypes.string,\n    displayName: React.PropTypes.string,\n    group: React.PropTypes.string,\n  }),\n};\n\nconst ButtonGroupDropdown = ({ groupName, groupButtons }) => {\n  return (\n    <div className=\"btn-group\">\n      <button className=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\">\n        {groupName}\n        <span className=\"caret\"></span>\n      </button>\n      <ul className=\"dropdown-menu\">\n        {groupButtons.map(fieldDescription => (\n          <ButtonDropdownOption description={fieldDescription} />\n        ))}\n      </ul>\n    </div>\n  );\n};\nButtonGroupDropdown.propTypes = {\n  groupName: React.PropTypes.string,\n  groupButtons: React.PropTypes.array,\n};\n\n\nconst getDescrition = typeConstructor => {\n  return {\n    type: typeConstructor.info.type,\n    displayName: typeConstructor.info.displayName,\n    group: typeConstructor.info.group,\n  };\n};\n\nconst toGroups = (groups, description) => {\n  // Add to group array if it exists. Create it if it doesn't\n  groups[description.group] = groups[description.group] // eslint-disable-line no-param-reassign\n    ? groups[description.group].concat([description])\n    : [description];\n\n  return groups;\n};\n\nconst ControlBar = ({ fieldTypes }) => {\n  const fieldGroups = fieldTypes\n    .map(getDescrition)\n    .reduce(toGroups, {});\n\n  const buttonGroups = Object.keys(fieldGroups)\n    .map(groupName => (\n      <ButtonGroupDropdown\n        groupName={groupName}\n        groupButtons={fieldGroups[groupName]}\n      />\n    ));\n\n  return (\n    <div className=\"fl-fb-ControlBar\">\n      <div className=\"btn-group\">\n        {buttonGroups}\n      </div>\n      <button\n        className=\"btn btn-primary\"\n        onClick={() => EventHub.trigger('undoBtnPressed')}\n      > Undo </button>\n    </div>\n  );\n};\n\nControlBar.propTypes = {\n  fieldTypes: React.PropTypes.arrayOf(FieldCreatorPropType),\n};\n\nexport default ControlBar;\n"],"names":["listeners","on","eventName","func","concat","trigger","data","warn","forEach","f","EventHub","FieldCreatorPropType","React","PropTypes","shape","string","ButtonDropdownOption","description","type","displayName","propTypes","ButtonGroupDropdown","groupName","groupButtons","map","fieldDescription","array","getDescrition","typeConstructor","info","group","toGroups","groups","ControlBar","fieldTypes","fieldGroups","reduce","buttonGroups","Object","keys","arrayOf"],"mappings":"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","sourceRoot":"/source/"}
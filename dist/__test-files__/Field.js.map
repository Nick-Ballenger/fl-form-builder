{"version":3,"file":"Field.js","sources":["node_modules/fl-assert/dist/assert.js","src/js/EventHub.js","src/js/utils/throttle.js","src/js/utils/trackReorderDrag.js","src/js/utils/addListenerOnce.js","src/js/Field.js"],"sourcesContent":["// Bug checking function that will throw an error whenever\n// the condition sent to it is evaluated to false\n/**\n * Processes the message and outputs the correct message if the condition\n * is false. Otherwise it outputs null.\n * @api private\n * @method processCondition\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return {String | null}  - Error message if there is an error, nul otherwise.\n */\nfunction processCondition(condition, errorMessage) {\n  if (!condition) {\n    var completeErrorMessage = '';\n    var re = /at ([^\\s]+)\\s\\(/g;\n    var stackTrace = new Error().stack;\n    var stackFunctions = [];\n\n    var funcName = re.exec(stackTrace);\n    while (funcName && funcName[1]) {\n      stackFunctions.push(funcName[1]);\n      funcName = re.exec(stackTrace);\n    }\n\n    // Number 0 is processCondition itself,\n    // Number 1 is assert,\n    // Number 2 is the caller function.\n    if (stackFunctions[2]) {\n      completeErrorMessage = stackFunctions[2] + ': ' + completeErrorMessage;\n    }\n\n    completeErrorMessage += errorMessage;\n    return completeErrorMessage;\n  }\n\n  return null;\n}\n\n/**\n * Throws an error if the boolean passed to it evaluates to false.\n * To be used like this:\n * \t\tassert(myDate !== undefined, \"Date cannot be undefined.\");\n * @api public\n * @method assert\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return void\n */\nfunction assert(condition, errorMessage) {\n  var error = processCondition(condition, errorMessage);\n  if (typeof error === 'string') {\n    throw new Error(error);\n  }\n}\n\n/**\n * Logs a warning if the boolean passed to it evaluates to false.\n * To be used like this:\n * \t\tassert.warn(myDate !== undefined, \"No date provided.\");\n * @api public\n * @method warn\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return void\n */\nassert.warn = function warn(condition, errorMessage) {\n  var error = processCondition(condition, errorMessage);\n  if (typeof error === 'string') {\n    console.warn(error);\n  }\n};\n\nexport default assert;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJhc3NlcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQnVnIGNoZWNraW5nIGZ1bmN0aW9uIHRoYXQgd2lsbCB0aHJvdyBhbiBlcnJvciB3aGVuZXZlclxuLy8gdGhlIGNvbmRpdGlvbiBzZW50IHRvIGl0IGlzIGV2YWx1YXRlZCB0byBmYWxzZVxuLyoqXG4gKiBQcm9jZXNzZXMgdGhlIG1lc3NhZ2UgYW5kIG91dHB1dHMgdGhlIGNvcnJlY3QgbWVzc2FnZSBpZiB0aGUgY29uZGl0aW9uXG4gKiBpcyBmYWxzZS4gT3RoZXJ3aXNlIGl0IG91dHB1dHMgbnVsbC5cbiAqIEBhcGkgcHJpdmF0ZVxuICogQG1ldGhvZCBwcm9jZXNzQ29uZGl0aW9uXG4gKiBAcGFyYW0gIHtCb29sZWFufSBjb25kaXRpb24gLSBSZXN1bHQgb2YgdGhlIGV2YWx1YXRlZCBjb25kaXRpb25cbiAqIEBwYXJhbSAge1N0cmluZ30gZXJyb3JNZXNzYWdlIC0gTWVzc2FnZSBleHBsYWluaWcgdGhlIGVycm9yIGluIGNhc2UgaXQgaXMgdGhyb3duXG4gKiBAcmV0dXJuIHtTdHJpbmcgfCBudWxsfSAgLSBFcnJvciBtZXNzYWdlIGlmIHRoZXJlIGlzIGFuIGVycm9yLCBudWwgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBwcm9jZXNzQ29uZGl0aW9uKGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKSB7XG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgbGV0IGNvbXBsZXRlRXJyb3JNZXNzYWdlID0gJyc7XG4gICAgY29uc3QgcmUgPSAvYXQgKFteXFxzXSspXFxzXFwoL2c7XG4gICAgY29uc3Qgc3RhY2tUcmFjZSA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICAgIGNvbnN0IHN0YWNrRnVuY3Rpb25zID0gW107XG5cbiAgICBsZXQgZnVuY05hbWUgPSByZS5leGVjKHN0YWNrVHJhY2UpO1xuICAgIHdoaWxlIChmdW5jTmFtZSAmJiBmdW5jTmFtZVsxXSkge1xuICAgICAgc3RhY2tGdW5jdGlvbnMucHVzaChmdW5jTmFtZVsxXSk7XG4gICAgICBmdW5jTmFtZSA9IHJlLmV4ZWMoc3RhY2tUcmFjZSk7XG4gICAgfVxuXG4gICAgLy8gTnVtYmVyIDAgaXMgcHJvY2Vzc0NvbmRpdGlvbiBpdHNlbGYsXG4gICAgLy8gTnVtYmVyIDEgaXMgYXNzZXJ0LFxuICAgIC8vIE51bWJlciAyIGlzIHRoZSBjYWxsZXIgZnVuY3Rpb24uXG4gICAgaWYgKHN0YWNrRnVuY3Rpb25zWzJdKSB7XG4gICAgICBjb21wbGV0ZUVycm9yTWVzc2FnZSA9IGAke3N0YWNrRnVuY3Rpb25zWzJdfTogJHtjb21wbGV0ZUVycm9yTWVzc2FnZX1gO1xuICAgIH1cblxuICAgIGNvbXBsZXRlRXJyb3JNZXNzYWdlICs9IGVycm9yTWVzc2FnZTtcbiAgICByZXR1cm4gY29tcGxldGVFcnJvck1lc3NhZ2U7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGJvb2xlYW4gcGFzc2VkIHRvIGl0IGV2YWx1YXRlcyB0byBmYWxzZS5cbiAqIFRvIGJlIHVzZWQgbGlrZSB0aGlzOlxuICogXHRcdGFzc2VydChteURhdGUgIT09IHVuZGVmaW5lZCwgXCJEYXRlIGNhbm5vdCBiZSB1bmRlZmluZWQuXCIpO1xuICogQGFwaSBwdWJsaWNcbiAqIEBtZXRob2QgYXNzZXJ0XG4gKiBAcGFyYW0gIHtCb29sZWFufSBjb25kaXRpb24gLSBSZXN1bHQgb2YgdGhlIGV2YWx1YXRlZCBjb25kaXRpb25cbiAqIEBwYXJhbSAge1N0cmluZ30gZXJyb3JNZXNzYWdlIC0gTWVzc2FnZSBleHBsYWluaWcgdGhlIGVycm9yIGluIGNhc2UgaXQgaXMgdGhyb3duXG4gKiBAcmV0dXJuIHZvaWRcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKSB7XG4gIGNvbnN0IGVycm9yID0gcHJvY2Vzc0NvbmRpdGlvbihjb25kaXRpb24sIGVycm9yTWVzc2FnZSk7XG4gIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBib29sZWFuIHBhc3NlZCB0byBpdCBldmFsdWF0ZXMgdG8gZmFsc2UuXG4gKiBUbyBiZSB1c2VkIGxpa2UgdGhpczpcbiAqIFx0XHRhc3NlcnQud2FybihteURhdGUgIT09IHVuZGVmaW5lZCwgXCJObyBkYXRlIHByb3ZpZGVkLlwiKTtcbiAqIEBhcGkgcHVibGljXG4gKiBAbWV0aG9kIHdhcm5cbiAqIEBwYXJhbSAge0Jvb2xlYW59IGNvbmRpdGlvbiAtIFJlc3VsdCBvZiB0aGUgZXZhbHVhdGVkIGNvbmRpdGlvblxuICogQHBhcmFtICB7U3RyaW5nfSBlcnJvck1lc3NhZ2UgLSBNZXNzYWdlIGV4cGxhaW5pZyB0aGUgZXJyb3IgaW4gY2FzZSBpdCBpcyB0aHJvd25cbiAqIEByZXR1cm4gdm9pZFxuICovXG5hc3NlcnQud2FybiA9IGZ1bmN0aW9uIHdhcm4oY29uZGl0aW9uLCBlcnJvck1lc3NhZ2UpIHtcbiAgY29uc3QgZXJyb3IgPSBwcm9jZXNzQ29uZGl0aW9uKGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKTtcbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3NlcnQ7XG4iXSwiZmlsZSI6ImFzc2VydC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9\n","import assert from 'fl-assert';\n\n//\n//\n//     Singleton\n//\n//\n\nconst listeners = {};\n\nfunction on(eventName, func) {\n  listeners[eventName] = listeners[eventName]\n    ? listeners[eventName].concat([func])\n    : [func];\n}\n\nfunction trigger(eventName, data) {\n  assert.warn(listeners[eventName], `No one listening to \"${eventName}.\"`);\n\n  if (!listeners[eventName]) {\n    return;\n  }\n\n  listeners[eventName].forEach(f => f(data));\n}\n\nconst EventHub = {\n  on,\n  trigger,\n};\n\n\nexport default EventHub;\n","\n/**\n * @function throttle\n * @param  {integer}   FuncDelay\n * @param  {Function} callback\n * @return {Function}                  the throttled function\n */\nexport default function throttle(FuncDelay, callback) {\n  let lastCall = +new Date();\n  const delay = FuncDelay;\n  let params;\n  const context = {};\n  let calledDuringDelay = false;\n\n  return (...args) => {\n    const now = +new Date();\n    const diff = now - lastCall;\n    let timeToEndOfDelay;\n\n    params = args;\n\n    if (diff > delay) {\n      callback.apply(context, params); // Call function with latest parameters\n      calledDuringDelay = false;\n      lastCall = now;\n    } else if (!calledDuringDelay) {\n      // If it wasn't called yet, call it when there is enough delay.\n      timeToEndOfDelay = delay - diff;\n\n      setTimeout(() => {\n        callback.apply(context, params); // Call function with latest parameters\n      }, timeToEndOfDelay);\n\n      calledDuringDelay = true;\n      lastCall = now + timeToEndOfDelay;\n    } // Otherwise do nothing.\n  };\n}\n","import throttle from './throttle';\n/**\n * Will take care of the dragging and reordering a list for one drag.\n * @function trackReorderDrag\n * @param  {event} paramE        The dragstart event, from which this should be called.\n * @param  {HTMLElement} paramEl       The main Element being dragged\n * @param  {Array<HTMLElement>} paramElements Array of elements to be tracked.\n * @return {void}\n */\nexport default function trackReorderDrag(paramE, paramEl, paramElements) {\n  function setTranslation(el, val) {\n    el.style.transform = `translate3d(0, ${val}px, 0)`; //  eslint-disable-line no-param-reassign\n  }\n\n  /**\n   * @function resetElementsPositions\n   * @param {Array<HTMLElement>} els Elements being tracked\n   */\n  function resetElementsPositions(els) {\n    els.forEach((el) => {\n      setTranslation(el, 0);\n    });\n  }\n\n  /**\n   * @function calculateElementHeight\n   * @param  {Array<HTMLElement>} els    Elements ordered by vertical position\n   * @param  {Integer} elIndex\n   * @return {void}\n   */\n  function calculateElementHeight(els, elIndex) {\n    let spaceOccupied;\n\n    // If not the last element\n    if (elIndex < els.length - 1) {\n      const elTop = els[elIndex].getBoundingClientRect().top;\n      const nextElTop = els[elIndex + 1].getBoundingClientRect().top;\n      spaceOccupied = nextElTop - elTop;\n    } else {\n      // let's estimate the general vertical distance between elements by\n      // subtracting the size of the first element from the distance between\n      // its top and the next element.\n      const firstElSpaceOccupied =\n          els[1].getBoundingClientRect().top - els[0].getBoundingClientRect().top;\n      const verticalDistance = firstElSpaceOccupied - els[0].clientHeight;\n      const height = els[elIndex].clientHeight;\n      spaceOccupied = height + verticalDistance;\n    }\n\n    return spaceOccupied;\n  }\n\n  /**\n   * @function createDragMover\n   * @param  {Array<HTMLElement>} els\n   * @param  {Array<Integer>} tops        Initial tops\n   * @param  {Integer} targetIndex Index of element being dragged around\n   * @return {function}             The function to translate elements in the\n   *                                  list to make room for the dragged element\n   */\n  function createDragMover(els, tops, targetIndex) {\n    const target = els[targetIndex];\n    const targetInitialTop = tops[targetIndex];\n    const targetHeight = calculateElementHeight(els, targetIndex);\n    return function doDragMove() {\n      const targetTop = target.getBoundingClientRect().top;\n      const movedUp = (targetTop < targetInitialTop);\n\n      let i;\n      for (i = 0; i < tops.length; i++) {\n        if (i === targetIndex) {\n          continue;\n        } else\n        if (!movedUp && targetTop > tops[i] && tops[i] > targetInitialTop) {\n          setTranslation(els[i], -targetHeight);\n        } else if (movedUp && targetTop < tops[i + 1] && tops[i] < targetInitialTop) {\n          setTranslation(els[i], targetHeight);\n        } else {\n          setTranslation(els[i], 0);\n        }\n      }\n    };\n  }\n\n  function createDragListener(els, tops, targetIndex, initialY) {\n    const target = els[targetIndex];\n    const doDragMove = createDragMover(els, tops, targetIndex);\n    let shouldStopListening;\n    function dragListener(e) {\n      if (shouldStopListening) { return; }\n\n      doDragMove();\n      const newY = e.pageY;\n      if (newY === 0) { return; } // correct weird behaviour when mouse goes up\n\n      const diff = newY - initialY;\n      setTranslation(target, diff);\n    }\n\n    dragListener.stop = () => {\n      shouldStopListening = true;\n    };\n\n    return dragListener;\n  }\n\n  function getElementsCurrentTop(els) {\n    const tops = [];\n    els.forEach((el) => { tops.push(el.getBoundingClientRect().top); });\n\n    return tops;\n  }\n\n  // function adjustElementsToTops(els, tops) {\n  //   const currentTops = getElementsCurrentTop(els);\n  //   els.forEach(function (el, i) {\n  //     const diff =  currentTops[i] - tops[i];\n  //     setTranslation(el, diff);\n  //   });\n  // }\n\n  function insertTargetInRightPlace(els, initialTops, targetIndex) {\n    const target = els[targetIndex];\n    const topsBeforeInsertion = getElementsCurrentTop(els);\n    const targetTop = topsBeforeInsertion[targetIndex];\n    let i = 0;\n\n    // Pass by all elements that are above the target\n    while ((topsBeforeInsertion[i] && topsBeforeInsertion[i] < targetTop) ||\n              (i === targetIndex)) {\n      i++;\n    }\n\n    // Take away transitions from all elements and save them\n    const initialTransitions = [];\n    els.forEach((anEl) => {\n      initialTransitions.push(anEl.style.transition);\n      anEl.style.transition = 'none'; // eslint-disable-line no-param-reassign\n    });\n\n    // Put everyone at translate3d(0,0,0) without transitions\n    resetElementsPositions(els);\n\n    // Add the element in the appropriate place. This will displace everyone else.\n    const parent = (els[i]) ? els[i].parentElement : els[els.length - 1].parentElement;\n    if (!parent || !parent.appendChild) {\n      throw new Error('trackReorderDrag(): No parent found in element list.');\n    } else if (els[i]) {\n      parent.insertBefore(target, els[i]);\n    } else {\n      const lastEl = els[els.length - 1];\n      parent.insertBefore(target, lastEl);\n      parent.insertBefore(lastEl, target);\n    }\n\n    // Now let's translate it to where it was just before it was repositioned\n    // All without transitions. It will seem like it never left that spot.\n    const futureTop = target.getBoundingClientRect().top;\n    const displacement = targetTop - futureTop;\n    setTranslation(target, displacement);\n\n    // Let's add a timeout to get the last place in the UI queue and let the\n    // CSS renderer to process the fact that all these elements do not have\n    // transitions and should appear wherever their coordinates say immediately.\n    setTimeout(() => {\n      // Restore all transitions\n      els.forEach((anEl, k) => {\n        anEl.style.transition = initialTransitions[k]; // eslint-disable-line no-param-reassign\n      });\n\n      // Now transition the target can transition smoothly from where it\n      // was dropped to its final position at translate value 0.\n      setTranslation(target, 0);\n    }, 15);\n\n    //  adjustElementsToTops(els, topsBeforeInsertion);\n  }\n\n  function init(e, el, elements) {\n    if (typeof el !== 'object') {\n      throw new Error('trackReorderDrag(): Invalid parameter');\n    }\n\n    // Reorder elements\n    elements.sort((el1, el2) => {\n      return el1.getBoundingClientRect().top > el2.getBoundingClientRect().top;\n    });\n\n    // Set initial states\n    const initialTops = [];\n    elements.forEach((element) => {\n      initialTops.push(element.getBoundingClientRect().top);\n    });\n\n    const elIndex = elements.indexOf(el);\n\n    // Create throttled drag listener\n    const initialY = e.pageY;\n    const dragListener = createDragListener(elements, initialTops, elIndex, initialY);\n    const throttledDragListener = throttle(50, dragListener);\n\n    // Listen to drags\n    const eventTarget = e.target;\n    eventTarget.addEventListener('drag', throttledDragListener);\n    eventTarget.addEventListener('dragend', function dragEndListener() {\n      dragListener.stop();\n      insertTargetInRightPlace(elements, initialTops, elIndex);\n      eventTarget.removeEventListener('drag', throttledDragListener);\n      eventTarget.removeEventListener('dragend', dragEndListener);\n    });\n  }\n\n  init(paramE, paramEl, paramElements);\n}\n","export default function addListenerOnce(eventName, el, f) {\n  function triggerAndRemove(event) {\n    f(event);\n    el.removeEventListener(eventName, triggerAndRemove);\n  }\n\n  el.addEventListener(eventName, triggerAndRemove);\n}\n","import React from 'react';\nimport assert from 'fl-assert';\nimport EventHub from './EventHub';\nimport trackReorderDrag from './utils/trackReorderDrag';\nimport addListenerOnce from './utils/addListenerOnce';\n\n\n// =========== Handle drag\n\n\nfunction getParentField(el) {\n  if (!el || ! el.parentNode) { return el; }\n  return el.classList.contains('fl-fb-Field')\n    ? el\n    : getParentField(el.parentNode);\n}\n\nconst onDragStart = event => {\n  const e = event.nativeEvent;\n  // hide any dragging image\n  e.dataTransfer.setDragImage(document.createElement('img'), 0, 0);\n\n  const mainField = getParentField(e.target);\n  const trackedFields = Array.from(mainField.parentElement.children);\n\n  if (trackedFields.length < 2) { return; }\n  mainField.classList.add('fl-fb-Field--dragging');\n  trackReorderDrag(e, mainField, trackedFields);\n\n  // Post dragging\n  addListenerOnce('dragend', mainField, () => {\n    // remove dragging class after animation finishes\n    setTimeout(() => mainField.classList.remove('fl-fb-Field--dragging'), 250);\n\n    const reorderedIds = Array.from(trackedFields)\n      .sort((el1, el2) => {\n        return el1.getBoundingClientRect().top >\n               el2.getBoundingClientRect().top;\n      })\n      .map(f => f.dataset.id);\n\n    EventHub.trigger('fieldsReorder', reorderedIds);\n  });\n};\n\n// =========== END OF Handle drag\n\n\nconst updateField = newState => {\n  EventHub.trigger('updateField', newState);\n};\n\nconst deleteField = fieldState => {\n  EventHub.trigger('deleteField', fieldState);\n};\n\nconst toggleConfig = (fieldState) => {\n  const newFieldState = Object.assign(\n    {},\n    fieldState,\n    { configShowing: !fieldState.configShowing }\n  );\n  updateField(newFieldState);\n};\n\nconst toggleRequired = (fieldState) => {\n  const newFieldState = Object.assign(\n    {},\n    fieldState,\n    { required: !fieldState.required }\n  );\n  updateField(newFieldState);\n};\n\nconst isValidFieldState = state => {\n  return typeof state.id === 'number'\n    && typeof state.type === 'string'\n    && typeof state.group === 'string'\n    && typeof state.configShowing === 'boolean';\n};\n\nconst Sidebar = ({ fieldState }) => (\n  <div className=\"fl-fb-Field-sidebar\">\n    <button\n      className=\"glyphicon glyphicon-menu-hamburger fl-fb-Field-sidebar-btn\"\n      onDragStart={onDragStart}\n      draggable=\"true\"\n    />\n    <button\n      className=\"glyphicon glyphicon-cog fl-fb-Field-sidebar-btn-config\"\n      onClick={() => toggleConfig(fieldState)}\n    />\n    <button\n      className=\"glyphicon glyphicon-trash fl-fb-Field-sidebar-btn-delete\"\n      onClick={() => deleteField(fieldState)}\n    />\n  </div>\n);\n\nconst ConfigBar = ({ fieldState }) => (\n  <div className=\"fl-fb-Field-configuration\">\n    <div className=\"fl-fb-Field-configuration-buttons\">\n      <label\n        className=\"fl-fb-Field-configuration-switch-required\"\n        onMouseDown={() => toggleRequired(fieldState)}\n      >\n        Required\n        <div className=\"fl-fb-ui-switch\">\n          <input\n            className=\"fl-fb-ui-switch-toggle fl-fb-ui-switch-toggle-round\"\n            type=\"checkbox\"\n            id={`fl-fb-ui-switch-${fieldState.id}`}\n            checked={fieldState.required}\n          />\n          <label htmlFor={`fl-fb-ui-switch-${fieldState.id}`}> </label>\n        </div >\n      </label>\n\n      <span className=\"fl-fb-Field-configuration-elementName\">\n        {fieldState.displayName}\n      </span >\n\n      <button\n        className=\"fl-fb-Field-configuration-btn-ok btn btn-sm btn-default glyphicon glyphicon-ok\"\n        onClick={() => toggleConfig(fieldState)}\n        type=\"button\"\n      />\n    </div >\n  </div>\n);\n\nconst Field = ({ fieldState, fieldConstructor }) => {\n  assert(isValidFieldState(fieldState), `Invalid field state: ${fieldState}`);\n\n  const fieldComponent = fieldConstructor.RenderEditor;\n\n  const topClasses = fieldState.configShowing\n    ? 'fl-fb-Field fl-fb-Field--configuration-visible'\n    : 'fl-fb-Field';\n\n  return (\n    <div className={topClasses} data-id={fieldState.id}>\n      <div className=\"fl-fb-Field-content\">\n        {React.createElement(fieldComponent, { state: fieldState, update: updateField })}\n      </div>\n      <Sidebar fieldState={fieldState} />\n      <ConfigBar fieldState={fieldState} />\n    </div>\n  );\n};\n\nField.propTypes = {\n  fieldState: React.PropTypes.object,\n  fieldConstructor: React.PropTypes.object,\n};\n\nexport default Field;\n"],"names":["listeners","on","eventName","func","concat","trigger","data","warn","forEach","f","EventHub","throttle","FuncDelay","callback","lastCall","Date","delay","params","context","calledDuringDelay","args","now","diff","timeToEndOfDelay","apply","trackReorderDrag","paramE","paramEl","paramElements","setTranslation","el","val","style","transform","resetElementsPositions","els","calculateElementHeight","elIndex","spaceOccupied","length","elTop","getBoundingClientRect","top","nextElTop","firstElSpaceOccupied","verticalDistance","clientHeight","height","createDragMover","tops","targetIndex","target","targetInitialTop","targetHeight","doDragMove","targetTop","movedUp","i","createDragListener","initialY","shouldStopListening","dragListener","e","newY","pageY","stop","getElementsCurrentTop","push","insertTargetInRightPlace","initialTops","topsBeforeInsertion","initialTransitions","anEl","transition","parent","parentElement","appendChild","Error","insertBefore","lastEl","futureTop","displacement","k","init","elements","sort","el1","el2","element","indexOf","throttledDragListener","eventTarget","addEventListener","dragEndListener","removeEventListener","addListenerOnce","triggerAndRemove","event","getParentField","parentNode","classList","contains","onDragStart","nativeEvent","dataTransfer","setDragImage","document","createElement","mainField","trackedFields","Array","from","children","add","remove","reorderedIds","map","dataset","id","updateField","newState","deleteField","fieldState","toggleConfig","newFieldState","Object","assign","configShowing","toggleRequired","required","isValidFieldState","state","type","group","Sidebar","ConfigBar","displayName","Field","fieldConstructor","fieldComponent","RenderEditor","topClasses","update","propTypes","React","PropTypes","object"],"mappings":"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","sourceRoot":"/source/"}
function FormBody(){if(!(this instanceof FormBody))return new FormBody;var a,b,c=[];this.addComponent=function(d){return a?d?(c.push(d),a.insertBefore(d.element,b),d.configToggle(!0),void 0):void console.error("FormBody: No element to be added included."):void console.error("FormBody: Form not initialised.")},this.init=function(){a=document.createElement("form"),a.classList.add("form-horizontal"),a.addEventListener("submit",function(a){a.preventDefault(),console.log("Submit button clicked."),console.dir(c)});var d=this;a.addEventListener("newElement",function(a){return a.detail?void d.addComponent(a.detail.comp):void console.error('No data in "newElement" event.')}),b=document.createElement("input"),b.setAttribute("type","submit"),b.classList.add("btn"),b.classList.add("col-sm-12"),a.appendChild(b),this.element=a},this.init()}function FormComponent(){return this instanceof FormComponent?void 0:new FormComponent}function FormFabric(a){function b(a,b){var c="Temp name"+Math.floor(1e3*Math.random()),d=new a(c),e=new CustomEvent("newElement",{detail:{comp:d},bubbles:!0,cancelable:!0});b.dispatchEvent(e)}function c(){var c=document.createDocumentFragment();return d.forEach(function(e,f){var g=document.createElement("button");g.setAttribute("value",f),g.className=e["class"],g.classList.add("btn"),g.classList.add("btn-default"),g.addEventListener("click",function(c){var e=g.value;console.log("Create a ",d[e].desc),b(d[e].constr,a)}),c.appendChild(g)}),c}if(!(this instanceof FormFabric))return new FormFabric;var d=[{desc:"Radio buttons",constr:RadioBtns,"class":"glyphicon glyphicon-ok-circle"},{desc:"Checkboxes",constr:Checkboxes,"class":"glyphicon glyphicon-check"},{desc:"Dropdown",constr:Dropdown,"class":"glyphicon glyphicon-collapse-down"},{desc:"Text box",constr:TextBox,"class":"glyphicon glyphicon-text-width"},{desc:"Text area",constr:TextArea,"class":"glyphicon glyphicon-text-height"}];this.init=function(){this.element=document.createElement("div"),this.element.classList.add("fl-form-fabric");var a=c();this.element.appendChild(a)},this.init(a)}function Checkboxes(a){return this instanceof Checkboxes?void this.init(a):new Checkboxes}function Dropdown(a){return this instanceof Dropdown?void this.init(a):new Dropdown}function RadioBtns(a){return this instanceof RadioBtns?void this.init(a):new RadioBtns}function TextArea(a){return this instanceof TextArea?void this.init(a):new TextArea}function TextBox(a){return this instanceof TextBox?void this.init(a):new TextBox}FormComponent.prototype.init=function(a){if("string"!=typeof a)throw new Error("FormComponent: "+a+' is not a valid "name" parameter.');this.element=document.createElement("div"),this.element.classList.add("fl-component"),this.element.classList.add("col-md-12"),this.element.classList.add("form-group"),this.content=document.createElement("div"),this.content.classList.add("fl-form-content"),this.element.appendChild(this.content),this.name=a,this.createControls()},FormComponent.prototype.createControls=function(){var a=document.createElement("div");a.classList.add("fl-component-side-control");var b=document.createElement("i");b.classList.add("glyphicon"),b.classList.add("glyphicon-menu-hamburger"),a.appendChild(b);var c=document.createElement("button");c.setAttribute("type","button"),c.classList.add("glyphicon"),c.classList.add("glyphicon-pencil"),a.appendChild(c);var d=this;c.addEventListener("click",function(){d.configToggle()});var e=document.createElement("div");e.classList.add("fl-component-config"),this.configBox=e;var f=document.createElement("div");f.classList.add("full-width"),this.configContent=f,e.appendChild(f);var g=document.createElement("div");g.classList.add("col-sm-12");var h=document.createElement("button");h.setAttribute("type","button"),h.classList.add("btn"),h.classList.add("btn-danger"),h.classList.add("btn-sm"),h.classList.add("fl-bottom-btn"),h.innerText="Delete",h.addEventListener("click",function(){d.destroy()}),g.appendChild(h);var i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("btn"),i.classList.add("btn-default"),i.classList.add("btn-sm"),i.classList.add("fl-bottom-btn"),i.innerText="Ok",i.addEventListener("click",function(){d.saveConfig(),d.configToggle()}),g.appendChild(i);var j=document.createElement("label");j.innerText="Required";var k=document.createElement("div");k.classList.add("switch");var l=document.createElement("input");l.classList.add("cmn-toggle"),l.classList.add("cmn-toggle-round"),l.setAttribute("type","checkbox"),l.id="cmn-toggle-"+Date.now(),l.addEventListener("change",function(a){var b=a.target.checked,c=d.required(b);c||(a.target.checked=!b)}),k.appendChild(l);var m=document.createElement("label");m.setAttribute("for",l.id),k.appendChild(m),j.appendChild(k),g.appendChild(j),e.appendChild(g),this.element.appendChild(e),this.element.appendChild(a)},FormComponent.prototype.configToggle=function(a){a=a||!this.configShowing,a?this.showConfig():this.hideConfig()},FormComponent.prototype.hideConfig=function(){if(!this.configBox)throw new Error("FormComponent.configToggle(): No configBox initialised");if(this.configShowing){this.element.classList.remove("fl-form-config-visible"),this.configShowing=!1;var a=this.element.querySelectorAll(".fl-editable"),b="Set a placeholder text.";[].forEach.call(a,function(a){if(a.setAttribute("contenteditable",!1),"TEXTAREA"===a.nodeName||"INPUT"===a.nodeName&&"text"===a.type){var c=a.getAttribute("placeholder"),d=a.value;d?a.setAttribute("placeholder",d):c===b&&a.removeAttribute("placeholder"),a.value=""}})}},FormComponent.prototype.showConfig=function(){if(!this.configBox)throw new Error("FormComponent.showConfing(): No configBox initialised");if(!this.configShowing){this.element.classList.add("fl-form-config-visible"),this.configShowing=!0;var a=this.element.querySelectorAll(".fl-editable"),b="Set a placeholder text.";[].forEach.call(a,function(a){if(a.setAttribute("contenteditable",!0),"TEXTAREA"===a.nodeName||"INPUT"===a.nodeName&&"text"===a.type){var c=a.getAttribute("placeholder"),d=c?c:b;a.setAttribute("placeholder",d),a.value=""}});var c=this.focusElement||this.configBox.querySelector("switch");c&&setTimeout(function(){c.focus()},15);var d=this,e=document.body,f=!0;e.addEventListener("mousedown",function g(a){console.log("Listener called");var b=g,c=a.clientX,h=a.clientY;d.isAtPoint(c,h)||(e.removeEventListener("mousedown",b,f),d.hideConfig())},f)}},FormComponent.prototype.isAtPoint=function(a,b){var c=this.configBox.getBoundingClientRect(),d=this.element.getBoundingClientRect(),e=d.top,f=c.bottom,g=Math.max(c.right,d.right),h=Math.min(c.left,d.left);return!(h>a||a>g||e>b||b>f)},FormComponent.prototype.createConfigInputField=function(){var a=document.createElement("input");a.setAttribute("placeholder","Description"),a.setAttribute("type","text"),this.focusElement=a;var b=document.createElement("i");b.classList.add("glyphicon"),b.classList.add("glyphicon-plus-sign"),b.classList.add("fl-grey-btn");var c=this;b.addEventListener("click",function(){return a.value.trim()?(c.add(a.value),void(a.value="")):(a.classList.add("fl-blink-red"),void setTimeout(function(){a.classList.remove("fl-blink-red")},1500))}),a.addEventListener("keypress",function(a){if(13===a.which){var c=new Event("click");return b.dispatchEvent(c),a.preventDefault(),!1}return!0}),this.configContent.appendChild(b),this.configContent.appendChild(a)},FormComponent.prototype.saveConfig=function(){},FormComponent.prototype.destroy=function(){this.element.remove()},FormComponent.prototype.required=function(a){var b=this.content.querySelectorAll("input"),c=this.content.querySelectorAll("textarea");b=[].slice.call(b),c=[].slice.call(c);var d=[].concat.call(b,c);return a?d.forEach(function(a){a.setAttribute("required",!0)}):d.forEach(function(a){a.removeAttribute("required")}),!0},FormComponent.prototype.addPlaceHolder=function(){this.placeHolder=this.add("placeholder","Insert an option"),this.placeHolder.setAttribute("disabled",!0)},FormComponent.prototype.removePlaceHolder=function(){this.placeHolder.remove(),this.placeHolder=null},Checkboxes.prototype=new FormComponent,Checkboxes.prototype.init=function(a){this.constructor.prototype.init.call(this,a),this.name=a+"[]",this.isRequired=!1,this.createConfigInputField(),this.addPlaceHolder()},Checkboxes.prototype.add=function(a,b){if(!a)throw new Error("Checkboxes.add(): No value parameter provided.");this.isRequired&&this.countBoxes()>1?console.error('Checkboxes: To be "required" there can only be one checkbox in the group'):this.placeHolder&&this.removePlaceHolder();var c=document.createElement("input");c.setAttribute("type","checkbox"),c.setAttribute("name",this.name),c.setAttribute("value",a),c.classList.add("fl-check-box"),this.isRequired&&c.setAttribute("required",!0);var d=document.createElement("span");d.innerText=b||a,d.classList.add("fl-editable");var e=document.createElement("label");return e.appendChild(c),e.appendChild(d),this.content.appendChild(e),e},Checkboxes.prototype.required=function(a){if(this.countBoxes()>1&&a)return console.error('Checkboxes: To be "required" there can only be one checkbox in the group'),!1;this.isRequired=a;var b=this.getBoxes();return a?b.forEach(function(a){a.setAttribute("required",!0)}):b.forEach(function(a){a.removeAttribute("required")}),!0},Checkboxes.prototype.countBoxes=function(){return this.content.childElementCount},Checkboxes.prototype.getBoxes=function(){return[].slice.call(this.content.querySelectorAll("input"))},Checkboxes.prototype.addPlaceHolder=function(){this.placeHolder=this.add("placeholder","Check a box")},Dropdown.prototype=new FormComponent,Dropdown.prototype.init=function(a){this.constructor.prototype.init.call(this,a);var b=document.createElement("div");b.classList.add("full-width");var c=document.createElement("label");c.innerText="Dropdown ",c.classList.add("fl-editable"),this.labelText=c,b.appendChild(c),this.wrapper=document.createElement("select"),this.wrapper.setAttribute("name",a),this.wrapper.classList.add("fl-dropdown"),this.wrapper.classList.add("form-control"),b.appendChild(this.wrapper),this.content.appendChild(b),this.createConfigInputField(),this.addPlaceHolder()},Dropdown.prototype.add=function(a,b){if(!a)throw new Error("Dropdown.add(): "+a+' is not a valid "value" value.');this.placeHolder&&this.removePlaceHolder();var c=document.createElement("option");return c.setAttribute(a,a),c.innerText=b||a,this.wrapper.appendChild(c),c},Dropdown.prototype.addPlaceHolder=function(){this.placeHolder=this.add("placeholder","Select an option"),this.placeHolder.setAttribute("disabled",!0),this.placeHolder.setAttribute("selected",!0)},RadioBtns.prototype=new FormComponent,RadioBtns.prototype.init=function(a){this.constructor.prototype.init.call(this,a),this.createConfigInputField(),this.addPlaceHolder()},RadioBtns.prototype.add=function(a,b){if(!a)throw new Error("RadioBtns.add(): "+a+' is not a valid "value" parameter');this.placeHolder&&this.removePlaceHolder();var c=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("name",this.name),c.setAttribute("value",a),c.classList.add("fl-radio-btn");var d=document.createElement("label"),e=document.createTextNode(b||a);return d.appendChild(c),d.appendChild(e),this.content.appendChild(d),d},TextArea.prototype=new FormComponent,TextArea.prototype.init=function(a){this.constructor.prototype.init.call(this,a);var b=document.createElement("div");b.classList.add("full-width");var c=document.createElement("label");c.innerText="Text Area ",c.classList.add("fl-editable"),this.labelText=c,b.appendChild(c);var d=document.createElement("textarea");d.setAttribute("name",a),d.setAttribute("rows",5),d.classList.add("fl-editable"),d.classList.add("fl-text-area"),d.classList.add("form-control"),b.appendChild(d),this.content.appendChild(b)},TextArea.prototype.setLabel=function(a){a&&this.labelText&&(this.labelText.innerText=a)},TextBox.prototype=new FormComponent,TextBox.prototype.init=function(a){this.constructor.prototype.init.call(this,a);var b=document.createElement("div");b.classList.add("full-width");var c=document.createElement("label");c.classList.add("fl-editable"),c.innerText="Text ",this.labelText=c,b.appendChild(c);var d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("name",a),d.classList.add("fl-editable"),d.classList.add("fl-text-box"),d.classList.add("form-control"),b.appendChild(d),this.content.appendChild(b)},TextBox.prototype.setLabel=function(a){a&&this.labelText&&(this.labelText.innerText=a)},xController(function(a){var b=new FormBody,c=new FormFabric(b.element);a.classList.add("fl-form-builder"),a.appendChild(c.element),a.appendChild(b.element)});
//# sourceMappingURL=fl-form-builder.map